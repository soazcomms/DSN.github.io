<!DOCTYPE html>
<html>
<head>
    <title>DSN Map v02</title>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCbSJRMkCIX_qFZRf54qBYOnB9bvK3rb4I"></script>
    <style>
        #map {
            height: 100vh;
            width: 100%;
        }
    </style>
</head>
<body>
  <div id="map"></div>
  <script>
async function initMap() {
  // Request needed libraries.
  const { Map, InfoWindow } = await google.maps.importLibrary("maps");
  const { AdvancedMarkerElement, PinElement } = await google.maps.importLibrary(
    "marker",
  );
  // Set LatLng and title text for the markers. The first marker (Boynton Pass)
  // receives the initial focus when tab is pressed. Use arrow keys to move
  // between markers; press tab again to cycle through the map controls.
  const SQM = [
      {site: "Tucson, Pima County", position: {lat: 32.3067, lng: -110.8513},
       stat: "E", title: "Al Grauer"},
      {site: "Chiricahua NM, Cochise County",position: {lat: 32.0094, lng: -109.3888},
       stat:"E", title: "Bonita Creek"},
      {site: "Chiricahua NM, Cochise County",position: {lat: 32.0179, lng: -109.3208},
       stat:"E", title: "Sugarloaf"},
      {site: "Tumaca\u0301cori NHP, Santa Cruz County",position: {lat: 31.5681, lng: -111.0506},
       stat:"P", title: "Tumaca\u0301cori"},
      {site: "Ajo, Pima County", position: {lat: 32.373514, lng: -112.861560},
       stat:"P", title: "SQM"},
      {site: "Bisbee, Cochise County", position: {lat: 31.448847, lng: -109.888461},
       stat: "P", title: "SQM"},
      {site: "Douglas, Cochise County", position: {lat: 31.344761, lng: -109.554867},
       stat: "P", title: "SQM"},
      {site: "Kartchner Caverns State Park, Cochise County", position: {lat: 31.836720, lng: -110.348983},
       stat: "P", title: "SQM"},
      {site: "Kitt Peak National Observatory, Pima County", position: {lat: 31.962353, lng: -111.600172},
       stat: "E", title: "SQM"},
      {site: "Morenci, Greenlee County", position: {lat: 33.052356, lng: -109.329701},
       stat: "P", title: "SQM"},
      {site: "Oracle State Park, Pinal County", position: {lat: 32.609562, lng: -110.733601},
       stat: "P", title: "SQM"},
      {site: "Organ Pipe Cactus National Monument, Pima County", position: {lat: 31.954850, lng: -112.801143},
       stat: "P", title: "SQM"},
      {site: "Picacho Peak State Park, Pinal County", position: {lat: 32.646156, lng: -111.401747},
       stat: "P", title: "SQM"},
      {site: "Rio Rico High School, Santa Cruz County", position: {lat: 31.504722, lng: -111.018772},
       stat: "P", title: "SQM"},
      {site: "Sahuarita High School, Pima County", position: {lat: 31.958833, lng: -110.973278},
       stat: "P", title: "SQM"},
      {site: "Sells, Pima County", position: {lat: 31.914867, lng: -111.881854},
       stat: "P", title: "SQM"},
      {site: "Tubac, Santa Cruz County", position: {lat: 31.580556, lng: -111.081111},
       stat: "P", title: "SQM"},
      {site: "Safford , Graham County", position: {lat: 32.832728 , lng: -109.715529},
       stat: "P", title: "SQM"},
      {site: "Saguaro National Park Rincon Mountain District , Pima County", position: {lat: 32.170756, lng: -110.735475},
       stat: "P" , title: "SQM"},
      {site: "Sierra Vista , Cochise County", position: {lat: 31.565117 , lng: -110.273187},
       stat: "P" , title: "SQM"},
      {site: "Steward Observatory (Mt. Bigelow Station),  Pima County", position: {lat: 32.417219, lng: -110.732472},
       stat: "E", title: "SQM"},
      {site: "Steward Observatory (Mt. Lemmon Station), Pima County", position: {lat: 32.442550, lng: -110.788581},
       stat: "E", title: "SQM"},
      {site: "Tucson E, Pima County", position: {lat: 32.223633, lng: -110.767720},
       stat: "E", title: "SQM"},
      {site: "Tucson W, Pima County", position: {lat: 32.232528, lng: -110.947081},
       stat: "E", title: "SQM"},
     {site: "Vatican Observatory (Mt. Graham Station), Graham County", position: {lat: 32.701309, lng: -109.892060},
       stat: "P", title: "VAT"},
      {site: "Willcox, Cochise County", position: {lat: 32.251463, lng: -109.831434},
       stat: "P", title: "SQM"},
      {site: "Winer Observatory, Santa Cruz County", position: {lat: 31.665833, lng: -110.601944},
       stat: "P", title: "SQM"},
      {site: "Winkelman, Gila County", position: {lat: 32.987257, lng: -110.772402},
       stat: "P", title: "SQM"},
      {site: "Yuma, Yuma County", position: {lat: 32.703056, lng: -114.628056},
       stat: "P", title: "SQM"},
   ];
  const map = new Map(document.getElementById("map"), {
    zoom: 8,
    center: {lat: 32.2540, lng: -110.9742},
    mapId: "4504f8b37365c3d0",
  });
  // Create an info window to share between markers.
  const infoWindow = new InfoWindow();

  // Create the markers.
    SQM.forEach(({ position, title, site, stat }, i) => {
	if (i<9) {
	    spacer="0";
	} else {
	    spacer="";
	}
	if (stat=="E") {
	    status="Existing"
	    backgc="orange"
	} else{
	    status="Proposed"
	    backgc="red"
	}
	const pin = new PinElement({
	    glyph: `${spacer}${i + 1}`,
	    scale: 1.2,
	    background: backgc,
	});
    const marker = new AdvancedMarkerElement({
	position,
	map,
	title: `<h1>${title}</h1><br><h2>${site}<br>${status}</h2>
<br><h4>lat ${position.lat}<br> lon ${position.lng}</h4>`,
	content: pin.element,
	gmpClickable: true,
    });

    // Add a click listener for each marker, and set up the info window.
    marker.addListener("click", ({ domEvent, latLng }) => {
      const { target } = domEvent;

      infoWindow.close();
      infoWindow.setContent(marker.title);
      infoWindow.open(marker.map, marker);
    });
  });
}

      initMap();
  </script>
</html>

